# Команды для создания image, из которого будет создан новый контейнер
# node - название image
# когда докер прочитает эту строчку, то проверит, есть-ли у нас этот image
# если нет - скачает с docker.hub, а если там не найдет - вернет ошибку
FROM node   

# указываем, в какой папке работаем
WORKDIR /app

# если у нас уже скачаны какие-то пакеты, то повторно их скачивать не будем
COPY package.json /app

# на основе файла package.json можем установить модули
RUN npm install

# указываем, какие файлы хотим переместить в образ и там зафиксировать, т.к.
# образ создается только для чтения (нельзя изменить после создания)
# файлы копируются из проекта в image
# говорим, откуда копировать, первая точка означает взять все из корня проекта,
# где лежит dockerfile
# второе значение - куда в образе поместить файлы (в корень)
# точка - это абсолютный путь, но мы указали workdir и точка указывает на этот путь
COPY . /app

# переменная, где будет храниться номер порта
ENV PORT 4200

# указываем порт, который запускает приложение (необязательно)
EXPOSE $PORT

# запуск приложения
CMD ["node", "app.js"]
